{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport axios from 'axios';\nconst useUserValidation = () => {\n  _s();\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      const token = localStorage.getItem('voteyatra_token');\n      if (!token) return;\n      try {\n        const res = await axios.get('http://localhost:3000/vote/auth/check-valid-user', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!res.data.valid) {\n          localStorage.clear();\n          alert('âŒ Your account was deleted by the admin. You will be logged out.');\n          window.location.href = '/login'; // ðŸš¨ Direct page reload\n        }\n      } catch (err) {\n        var _err$response;\n        if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 404) {\n          localStorage.clear();\n          alert('âŒ Your account no longer exists. You will be logged out.');\n          window.location.href = '/login';\n        }\n      }\n    }, 10000); // every 10 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n};\n_s(useUserValidation, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nexport default useUserValidation;","map":{"version":3,"names":["useEffect","axios","useUserValidation","_s","interval","setInterval","token","localStorage","getItem","res","get","headers","Authorization","data","valid","clear","alert","window","location","href","err","_err$response","response","status","clearInterval"],"sources":["C:/Users/srinigeeth/OneDrive/Desktop/projects/Voting app/voting-frontend/src/components/useUserValidation.jsx"],"sourcesContent":["import { useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst useUserValidation = () => {\r\n  useEffect(() => {\r\n    const interval = setInterval(async () => {\r\n      const token = localStorage.getItem('voteyatra_token');\r\n      if (!token) return;\r\n\r\n      try {\r\n        const res = await axios.get('http://localhost:3000/vote/auth/check-valid-user', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        if (!res.data.valid) {\r\n          localStorage.clear();\r\n          alert('âŒ Your account was deleted by the admin. You will be logged out.');\r\n          window.location.href = '/login'; // ðŸš¨ Direct page reload\r\n        }\r\n      } catch (err) {\r\n        if (err.response?.status === 404) {\r\n          localStorage.clear();\r\n          alert('âŒ Your account no longer exists. You will be logged out.');\r\n          window.location.href = '/login';\r\n        }\r\n      }\r\n    }, 10000); // every 10 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n};\r\n\r\nexport default useUserValidation;\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9BH,SAAS,CAAC,MAAM;IACd,MAAMI,QAAQ,GAAGC,WAAW,CAAC,YAAY;MACvC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC;MACrD,IAAI,CAACF,KAAK,EAAE;MAEZ,IAAI;QACF,MAAMG,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAG,CAAC,kDAAkD,EAAE;UAC9EC,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUN,KAAK;UAAG;QAC9C,CAAC,CAAC;QAEF,IAAI,CAACG,GAAG,CAACI,IAAI,CAACC,KAAK,EAAE;UACnBP,YAAY,CAACQ,KAAK,CAAC,CAAC;UACpBC,KAAK,CAAC,kEAAkE,CAAC;UACzEC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ,CAAC,CAAC;QACnC;MACF,CAAC,CAAC,OAAOC,GAAG,EAAE;QAAA,IAAAC,aAAA;QACZ,IAAI,EAAAA,aAAA,GAAAD,GAAG,CAACE,QAAQ,cAAAD,aAAA,uBAAZA,aAAA,CAAcE,MAAM,MAAK,GAAG,EAAE;UAChChB,YAAY,CAACQ,KAAK,CAAC,CAAC;UACpBC,KAAK,CAAC,0DAA0D,CAAC;UACjEC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;QACjC;MACF;IACF,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;;IAEX,OAAO,MAAMK,aAAa,CAACpB,QAAQ,CAAC;EACtC,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAACD,EAAA,CA3BID,iBAAiB;AA6BvB,eAAeA,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}